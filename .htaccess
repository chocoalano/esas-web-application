<IfModule mod_rewrite.c>
  RewriteEngine On

  # 🔁 Force redirect ke HTTPS
  RewriteCond %{HTTPS} !=on
  RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  # ✅ Disable browser caching
  <IfModule mod_headers.c>
    Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header set Pragma "no-cache"
    Header set Expires "Thu, 01 Jan 1970 00:00:00 GMT"
  </IfModule>

  # 🛑 Abaikan file & folder yang memang ada
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  # 🔁 Route semua permintaan lain ke index.html (SPA fallback)
  RewriteRule ^ index.html [QSA,L]
</IfModule>

# 🔒 Blok akses ke file sensitif
<FilesMatch "^\.env">
  Require all denied
</FilesMatch>
